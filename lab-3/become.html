<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cross-border Seller Registration</title>
    <!-- Link to the new CSS file -->
    <link rel="stylesheet" href="b-style.css">
    <!-- Link to Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body>

    <div class="main-container">
        <h1 class="page-title">Welcome to the Cross-border Seller Center</h1>

        <div class="registration-form-container">
            <!-- Decorative badge -->
            <div class="invitation-badge">
                Targeted<br>Invitation<br>to<br>merchants
            </div>

            <h2 class="form-title">Fill in registration information</h2>

            <!-- Added id to the form -->
            <form id="registration-form" novalidate>
                <!-- Country/Region -->
                <div class="input-group">
                    <label for="country">* Country/Region of Company Registration</label>
                    <p class="input-description">The country/region cannot be changed after the account is registered, please choose carefully</p>
                    <div class="select-wrapper">
                        <i class="fa-solid fa-flag"></i> <!-- Placeholder for flag -->
                        <select id="country">
                            <option value="cn">Chinese mainland</option>
                            <option value="hk">Hong Kong SAR</option>
                            <option value="us">United States</option>
                        </select>
                    </div>
                </div>

                <!-- Email -->
                <div class="input-group">
                    <label for="email">* Mail</label>
                    <input type="email" id="email" placeholder="Please enter your email address">
                    <div class="error-message"></div>
                </div>

                <!-- Email Verification -->
                <div class="input-group with-button">
                    <input type="text" placeholder="Please enter the email verification code">
                    <button type="button" class="send-code-btn">send</button>
                </div>

                <!-- Password -->
                <div class="input-group">
                    <label for="password">* Set account password</label>
                     <p class="input-description">The password must be 6-20 digits, letters, special symbols, and at least 2 different character combinations.</p>
                    <div class="password-wrapper">
                        <input type="password" id="password" placeholder="Please enter your password">
                        <i class="fa-regular fa-eye-slash password-toggle"></i>
                    </div>
                    <div class="error-message"></div>
                </div>

                <!-- Confirm Password -->
                <div class="input-group">
                    <div class="password-wrapper">
                        <!-- Added id to confirm password input -->
                        <input type="password" id="confirm-password" placeholder="Please enter your password again">
                        <i class="fa-regular fa-eye-slash password-toggle"></i>
                    </div>
                    <div class="error-message"></div>
                </div>

                <!-- Mobile Number -->
                <div class="input-group">
                    <label for="mobile">* Bind mobile phone number</label>
                    <div class="mobile-wrapper">
                        <span class="country-code">86</span>
                        <input type="tel" id="mobile" placeholder="Please enter your phone number">
                    </div>
                    <div class="error-message"></div>
                </div>
                
                <!-- SMS Verification -->
                <div class="input-group with-button">
                    <input type="text" placeholder="Please enter the SMS verification code">
                    <button type="button" class="send-code-btn">send</button>
                </div>

                <!-- Checkboxes -->
                <div class="checkbox-group">
                    <input type="checkbox" id="agreement1">
                    <label for="agreement1">I have read and agreed to the <a href="#">Cross-border Merchant Unified Workstation Service Agreement</a></label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="agreement2">
                    <label for="agreement2">I have read and agreed to the <a href="#">"Consent Letter for Cross-border Transfer of Personal Information by Chinese Sellers</a></label>
                </div>

                <!-- Register Button -->
                <button type="submit" class="register-btn">register</button>
            </form>
        </div>
    </div>

    <!-- JavaScript for Form Validation -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const form = document.getElementById('registration-form');
            const emailInput = document.getElementById('email');
            const passwordInput = document.getElementById('password');
            const confirmPasswordInput = document.getElementById('confirm-password');
            const mobileInput = document.getElementById('mobile');

            form.addEventListener('submit', (e) => {
                // Prevent form from submitting to run validation
                e.preventDefault();
                
                let isFormValid = true;
                
                // Clear all previous errors
                clearAllErrors();

                // Validate Email
                if (!isValidEmail(emailInput.value)) {
                    showError(emailInput, 'Please enter a valid email address.');
                    isFormValid = false;
                }

                // Validate Password
                const passwordError = getPasswordError(passwordInput.value);
                if (passwordError) {
                    showError(passwordInput, passwordError);
                    isFormValid = false;
                }

                // Validate Confirm Password
                if (passwordInput.value !== confirmPasswordInput.value) {
                    showError(confirmPasswordInput, 'Passwords do not match.');
                    isFormValid = false;
                }

                // Validate Phone Number
                if (!isValidPhone(mobileInput.value)) {
                    showError(mobileInput, 'Please enter a valid phone number (7-15 digits).');
                    isFormValid = false;
                }

                if (isFormValid) {
                    // If everything is okay, show a success message.
                    // In a real application, you would submit the form data to a server here.
                    alert('Registration successful!');
                    form.reset();
                }
            });

            // --- Validation Helper Functions ---

            function isValidEmail(email) {
                const re = /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
                return re.test(String(email).toLowerCase());
            }

            function getPasswordError(password) {
                if (password.length < 6 || password.length > 20) {
                    return 'Password must be between 6 and 20 characters.';
                }
                let characterTypes = 0;
                if (/[a-zA-Z]/.test(password)) characterTypes++; // has letters
                if (/[0-9]/.test(password)) characterTypes++; // has numbers
                if (/[^a-zA-Z0-9]/.test(password)) characterTypes++; // has special symbols
                
                if (characterTypes < 2) {
                    return 'Password must contain at least 2 different character types (letters, numbers, symbols).';
                }
                return null; // No error
            }

            function isValidPhone(phone) {
                // Simple check for a string of 7 to 15 digits
                const re = /^\d{7,15}$/;
                return re.test(phone);
            }

            // --- UI Helper Functions ---

            function showError(inputElement, message) {
                const inputGroup = inputElement.closest('.input-group');
                const errorElement = inputGroup.querySelector('.error-message');
                const fieldWrapper = inputElement.closest('.password-wrapper, .mobile-wrapper') || inputElement;
                
                inputGroup.classList.add('has-error'); // Add class to the parent group
                fieldWrapper.classList.add('input-error');
                errorElement.textContent = message;
                errorElement.style.display = 'block';
            }

            function clearAllErrors() {
                document.querySelectorAll('.has-error').forEach(el => {
                    el.classList.remove('has-error');
                });
                document.querySelectorAll('.error-message').forEach(el => {
                    el.textContent = '';
                    el.style.display = 'none';
                });
                document.querySelectorAll('.input-error').forEach(el => {
                    el.classList.remove('input-error');
                });
            }
        });
    </script>

</body>
</html>
